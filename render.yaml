services:
  - type: web
    name: bmi-calculator
    env: python
    buildCommand: |
      # Create a model directory
      mkdir -p model

      # Download the model file from Google Drive
      echo "Downloading model file from Google Drive..."
      # Extract the file ID from the Google Drive link
      FILE_ID="18Qv7ipbhfAer0XxfnBxPc2vUNedEbJhj"
      # Use gdown to download the file (more reliable than curl for Google Drive)
      pip install gdown
      gdown --id $FILE_ID -O model/custom_cnn_bmi_model_final.keras

      pip install -r requirements.txt
    startCommand: gunicorn app:app
    envVars:
      - key: PYTHON_VERSION
        value: 3.9.0
      - key: PORT
        value: 10000
